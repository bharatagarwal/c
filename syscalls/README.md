Following Chapter 8 from Kernighan and Ritchie
